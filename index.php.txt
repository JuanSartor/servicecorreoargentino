<?php
// Permitir CORS y JSON
header("Access-Control-Allow-Origin: *");
header("Content-Type: application/json");

// Leer el cuerpo de la solicitud
$input = file_get_contents("php://input");

// Endpoint real de Correo Argentino
$url = "https://api.correoargentino.com.ar" . ($_SERVER['REQUEST_URI'] ?? "");

// Inicializar cURL
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $input);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $_SERVER['REQUEST_METHOD']);
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    "Content-Type: application/json"
]);

$response = curl_exec($ch);
$err = curl_error($ch);
$info = curl_getinfo($ch);
curl_close($ch);

// Enviar respuesta
if ($err) {
    echo json_encode(["error" => $err, "info" => $info]);
} else {
    echo $response;
}
